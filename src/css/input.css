@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body, html {
    @apply m-0 p-0 w-full h-full overflow-hidden bg-black;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;
  }

  canvas {
    @apply block w-screen h-screen cursor-none;
    touch-action: none;
  }

  /* Color input styling */
  input[type="color"] {
    -webkit-appearance: none;
    @apply border-none rounded-full cursor-pointer bg-transparent p-0 flex-shrink-0;
    width: 28px;
    height: 28px;
    min-width: 28px;
    min-height: 28px;
    touch-action: manipulation;
  }

  input[type="color"]::-webkit-color-swatch {
    @apply border-2 border-white/30 rounded-full;
  }

  /* Global state-based styles */
  body.hide-ui #ui-container {
    @apply opacity-0 pointer-events-none;
    transform: translateX(-50%) translateY(-15px);
  }

  body.hide-ui.show-ui-on-hover #ui-container {
    @apply opacity-100 pointer-events-auto;
    transform: translateX(-50%) translateY(0);
  }

  body.hide-ui .mobile-menu-btn {
    @apply opacity-0 pointer-events-none;
    transform: translateY(-15px);
  }

  body.hide-ui .mobile-menu-btn:hover,
  body.hide-ui .mobile-menu-btn.active {
    @apply opacity-100 pointer-events-auto;
    transform: translateY(0) !important;
  }

  body.mobile-menu-open .mobile-menu-btn {
    @apply opacity-0 pointer-events-none;
  }

  body.home-overlay-open {
    @apply overflow-hidden;
  }

  body.home-overlay-open #ui-container,
  body.home-overlay-open .mobile-menu-btn {
    @apply opacity-0 pointer-events-none;
  }

  body.hide-ui #instruction {
    @apply opacity-0;
  }

  /* Hide mobile menu elements by default (desktop) */
  .mobile-menu-btn,
  .mobile-menu,
  .mobile-menu-overlay {
    display: none;
  }

  /* Hide desktop UI on mobile/tablet and show mobile menu button */
  @media (max-width: 768px) {
    .desktop-ui {
      display: none !important;
    }
    
    .mobile-menu-btn,
    .mobile-menu,
    .mobile-menu-overlay {
      display: flex;
    }
  }
}

@layer components {
  /* Dropdown component */
  .drop-btn::after {
    content: 'â–¾';
    font-size: 9px;
    opacity: 0.6;
  }

  .dropdown-content.show {
    @apply opacity-100 visible pointer-events-auto;
    transform: translateX(-50%) translateY(0);
  }

  /* Mobile menu component */
  .mobile-menu {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
  }

  .mobile-menu::-webkit-scrollbar {
    width: 6px;
  }

  .mobile-menu::-webkit-scrollbar-track {
    background: transparent;
  }

  .mobile-menu::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 3px;
  }

  .mobile-menu::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
  }

  .mobile-menu.show {
    @apply translate-y-0;
  }

  .mobile-menu-overlay.show {
    @apply opacity-100;
  }

  /* Mobile menu button states */
  .mobile-menu-btn.active span:nth-child(1) {
    transform: rotate(45deg) translate(7px, 7px);
  }

  .mobile-menu-btn.active span:nth-child(2) {
    @apply opacity-0;
  }

  .mobile-menu-btn.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
  }

  /* Mobile menu card animations */
  .mobile-menu > div > div:first-child + div > div > div {
    animation: slideInUp 0.4s ease-out backwards;
  }

  .mobile-menu > div > div:first-child + div > div > div:nth-child(1) { animation-delay: 0.05s; }
  .mobile-menu > div > div:first-child + div > div > div:nth-child(2) { animation-delay: 0.1s; }
  .mobile-menu > div > div:first-child + div > div > div:nth-child(3) { animation-delay: 0.15s; }
  .mobile-menu > div > div:first-child + div > div > div:nth-child(4) { animation-delay: 0.2s; }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Mobile menu button interactions */
  .mobile-menu button {
    will-change: transform, background-color;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0.1);
  }

  /* Mobile menu card hover effects */
  .mobile-menu [class*="bg-white/5"] {
    transition: all 0.2s ease;
  }

  .mobile-menu [class*="bg-white/5"]:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
  }

  /* Home overlay component */
  .home-overlay {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
  }

  .home-overlay::-webkit-scrollbar {
    width: 8px;
  }

  .home-overlay::-webkit-scrollbar-track {
    background: transparent;
  }

  .home-overlay::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 4px;
  }

  .home-overlay::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
  }

  .home-overlay.show {
    @apply opacity-100 visible;
  }

  .home-overlay.show .home-overlay-content {
    @apply scale-100;
  }

  .home-overlay-content {
    position: relative;
  }

  /* Home overlay animations */
  .home-overlay > div > div > div > div {
    animation: fadeInUp 0.6s ease-out backwards;
  }

  .home-overlay > div > div > div > div:nth-child(1) { animation-delay: 0.1s; }
  .home-overlay > div > div > div > div:nth-child(2) { animation-delay: 0.2s; }
  .home-overlay > div > div > div > div:nth-child(3) { animation-delay: 0.3s; }
  .home-overlay > div > div > div > div:nth-child(4) { animation-delay: 0.4s; }
  .home-overlay > div > div > div > div:nth-child(5) { animation-delay: 0.5s; }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

